<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Rock-paper-sizors</title>
  </head>
  <body>
    <button id="b1" onclick="rock()">Rock</button>
    <button id="b2" onclick="paper()">Paper</button>
    <button id="b3" onclick="scissors()">Scissors</button>

    <p id="info"></p>
    <script>
      let choices = ["rock", "paper", "scissors"];
      let pChoice;
      let cChoice;
      let roundwinner;
      let playerScore = 0;
      let computerScore = 0;
      let score = 0;
      const scoreInfo = document.getElementById("info").innerHTML;

      function rock() {
        document.getElementById("b1").innerHTML;
        pChoice = choices[0];
        cPlay();
      }

      function paper() {
        document.getElementById("b2").innerHTML;
        pChoice = choices[1];
        cPlay();
      }

      function scissors() {
        document.getElementById("b3").innerHTML;
        pChoice = choices[2];
        cPlay();
      }

      function cPlay() {
        cChoice = choices[Math.floor(Math.random() * 3)];
        console.log(cChoice);
        round();
      }

      function round() {
        if (pChoice == cChoice) {
          roundwinner = "tie";
          score++;
        } else if (
          (pChoice == "rock" && cChoice == "paper") ||
          (pChoice == "paper" && cChoice == "scissors") ||
          (pChoice == "scissors" && cChoice == "rock")
        ) {
          roundwinner = "computer";
          computerScore++;
          score++;
        } else {
          roundwinner = "player";
          playerScore++;
          score++;
        }

        //console.log("Round:", score);
        //console.log("Player: ", playerScore, " Computer: ", computerScore);
        isGameOver();
        updateScore();
      }

      function isGameOver() {
        if (score === 5) {
          return winner();
        }
      }

      function winner() {
        if (playerScore > computerScore) {
          alert("Player won!");
        } else if (computerScore > playerScore) {
          alert("Computer won!");
        } else {
          alert("It's a tie");
        }
        score = 0;
        playerScore = 0;
        computerScore = 0;
      }

      function updateScore() {
        if (roundwinner === "tie") {
          document.getElementById("info").innerHTML = "It's a tie";
        } else if (roundwinner === "player") {
          document.getElementById("info").innerHTML = "You won";
        } else if (roundwinner === "computer") {
          document.getElementById("info").innerHTML = "You lost";
        }
      }
    </script>
  </body>
</html>
